{% extends "pages/base.html" %}
{% load static %}

{% block title %}Sign Up{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <!-- Card wrapper สำหรับฟอร์ม Sign Up -->
      <div class="card shadow-sm">
        <div class="card-header">
          <ul class="nav nav-tabs card-header-tabs" id="signupTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button 
                class="nav-link {% if not request.GET.form or request.GET.form == 'reader' %}active{% endif %}" 
                id="reader-tab" 
                data-bs-toggle="tab" 
                data-bs-target="#reader-form" 
                type="button" 
                role="tab" 
                aria-controls="reader-form" 
                aria-selected="true">
                Reader
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button 
                class="nav-link {% if request.GET.form == 'publisher' %}active{% endif %}" 
                id="publisher-tab" 
                data-bs-toggle="tab" 
                data-bs-target="#publisher-form" 
                type="button" 
                role="tab" 
                aria-controls="publisher-form" 
                aria-selected="false">
                Publisher
              </button>
            </li>
          </ul>
        </div>
        <div class="card-body">
          <!-- แสดงข้อความ error ถ้ามี -->
          {% if error %}
            <div class="alert alert-danger" role="alert">
              {{ error }}
            </div>
          {% endif %}
          <div class="tab-content" id="signupTabContent">
            <!-- สำหรับ Reader -->
            <div class="tab-pane fade {% if not request.GET.form or request.GET.form == 'reader' %}show active{% endif %}" id="reader-form" role="tabpanel" aria-labelledby="reader-tab">
              <h4 class="card-title mb-4 text-center">Sign Up สำหรับ Reader</h4>
              <form action="" method="post">
                {% csrf_token %}
                <!-- ระบุ role reader -->
                <input type="hidden" name="role" value="reader">
                <div class="mb-3">
                  <label for="reader-username" class="form-label">Username</label>
                  <input type="text" class="form-control" id="reader-username" name="username" placeholder="Enter your username" required>
                </div>
                <div class="mb-3">
                  <label for="reader-password" class="form-label">Password</label>
                  <input type="password" class="form-control" id="reader-password" name="password" placeholder="Enter your password" required>
                </div>
                <div class="mb-3">
                  <label for="reader-password2" class="form-label">Confirm Password</label>
                  <input type="password" class="form-control" id="reader-password2" name="password2" placeholder="Confirm your password" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">ลงทะเบียน</button>                  
              </form>
              <p class="text-center mt-3">มีบัญชีแล้ว? <a href="{% url 'login' %}">Login</a></p>
            </div>

            <!-- สำหรับ Publisher -->
            <div class="tab-pane fade {% if request.GET.form == 'publisher' %}show active{% endif %}" id="publisher-form" role="tabpanel" aria-labelledby="publisher-tab">
              <h4 class="card-title mb-4 text-center">Sign Up สำหรับ Publisher</h4>
              <form action="" method="post">
                {% csrf_token %}
                <!-- ระบุ role publisher -->
                <input type="hidden" name="role" value="publisher">
                <div class="mb-3">
                  <label for="publisher-username" class="form-label">Username</label>
                  <input type="text" class="form-control" id="publisher-username" name="username" placeholder="Enter your username" required>
                </div>
                <div class="mb-3">
                  <label for="publisher-password" class="form-label">Password</label>
                  <input type="password" class="form-control" id="publisher-password" name="password" placeholder="Enter your password" required>
                </div>
                <div class="mb-3">
                  <label for="publisher-password2" class="form-label">Confirm Password</label>
                  <input type="password" class="form-control" id="publisher-password2" name="password2" placeholder="Confirm your password" required>
                </div>
                <div class="mb-3">
                  <label for="publisher-idcard" class="form-label">รหัสปชช.</label>
                  <input type="text" class="form-control" id="publisher-idcard" name="idcard" placeholder="Enter your ID card number" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">ลงทะเบียน</button>
              </form>
              <p class="text-center mt-3">มีบัญชีแล้ว? <a href="{% url 'login' %}">Login</a></p>
            </div>
          </div><!-- End tab-content -->
        </div>
      </div><!-- End card -->
    </div>
  </div>
</div>
{% endblock %}
